<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tmfast">
<title>Fast topic modeling with real books • tmfast</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fast topic modeling with real books">
<meta property="og:description" content="tmfast">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tmfast</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.2023-04-15</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/realbooks.html">Fast topic modeling with real books</a>
    <a class="dropdown-item" href="../articles/simulated.html">Fitting topic models (and simulating text data) with `tmfast`</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fast topic modeling with real books</h1>
                        <h4 data-toc-skip class="author"></h4>
<p>Dan Hicks <a href="mailto:hicks.daniel.j@gmail.com" class="email">hicks.daniel.j@gmail.com</a></p>
            
      
      
      <div class="d-none name"><code>realbooks.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we analyze a corpus of works from the long
nineteenth century, attempting to recover the author of each one.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>            <span class="co"># infrastructure</span></span></code></pre></div>
<pre><code><span><span class="co">## ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.2     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.4</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.0</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.4.2     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.2     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.0</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.2     </span></span>
<span><span class="co">## ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/eclarke/ggbeeswarm" class="external-link">ggbeeswarm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://memoise.r-lib.org" class="external-link">memoise</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jabiru/tictoc" class="external-link">tictoc</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/gutenbergr/" class="external-link">gutenbergr</a></span><span class="op">)</span>           <span class="co"># text retrieval and manipulation</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/juliasilge/tidytext" class="external-link">tidytext</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dhicks.github.io/tmfast/">tmfast</a></span><span class="op">)</span>               <span class="co"># topic modeling</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'tmfast'</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## The following object is masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     loadings</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.structuraltopicmodel.com/" class="external-link">stm</a></span><span class="op">)</span>                  <span class="co"># topic modeling</span></span></code></pre></div>
<pre><code><span><span class="co">## stm v1.3.6.1 successfully loaded. See ?stm for help. </span></span>
<span><span class="co">##  Papers, resources, and other materials at structuraltopicmodel.com</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_author</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">author_id</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://docs.ropensci.org/gutenbergr/reference/gutenberg_works.html" class="external-link">gutenberg_works</a></span><span class="op">(</span><span class="va">gutenberg_author_id</span> <span class="op">==</span> <span class="va">author_id</span>, </span>
<span>                    <span class="va">has_text</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://docs.ropensci.org/gutenbergr/reference/gutenberg_download.html" class="external-link">gutenberg_download</a></span><span class="op">(</span>meta_fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'author'</span>, <span class="st">'title'</span><span class="op">)</span>, </span>
<span>                       mirror <span class="op">=</span> <span class="st">'http://aleph.gutenberg.org'</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">get_author</span> <span class="op">=</span> <span class="fu"><a href="https://memoise.r-lib.org/reference/memoise.html" class="external-link">memoise</a></span><span class="op">(</span><span class="va">get_author</span>, </span>
<span>                     cache <span class="op">=</span> <span class="fu"><a href="https://memoise.r-lib.org/reference/cache_filesystem.html" class="external-link">cache_filesystem</a></span><span class="op">(</span><span class="st">'realbooks'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="corpus-assembly">Corpus assembly<a class="anchor" aria-label="anchor" href="#corpus-assembly"></a>
</h2>
<p>We first retrieve all works in Project Gutenberg by our target
authors: Jane Austen, Charlotte and Emily Brontë, Louisa May Alcott,
George Eliot, Charles Dickens, and HG Wells. We use the
<code>memoise</code> package with the helper function
<code>get_author()</code> to cache these results; the cache ends up at
about 286 MB.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Jane Austen is author 68</span></span>
<span><span class="va">gutenberg_authors</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Austen'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 7 × 7</span></span></span>
<span><span class="co">##   gutenberg_author_id author         alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                  68 Austen, Jane   <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>775      <span style="text-decoration: underline;">1</span>817 https://… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                <span style="text-decoration: underline;">7</span>603 Austen-Leigh,… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>798      <span style="text-decoration: underline;">1</span>874 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>               <span style="text-decoration: underline;">25</span>392 Austen-Leigh,… <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>               <span style="text-decoration: underline;">25</span>393 Austen-Leigh,… Aust…      <span style="text-decoration: underline;">1</span>872      <span style="text-decoration: underline;">1</span>961 <span style="color: #BB0000;">NA</span>        Austen…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>               <span style="text-decoration: underline;">36</span>446 Austen, Sidney <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>               <span style="text-decoration: underline;">40</span>288 Layard, Auste… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>817      <span style="text-decoration: underline;">1</span>894 <span style="color: #BB0000;">NA</span>        Layard…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>               <span style="text-decoration: underline;">47</span>662 Hubback, Mrs.… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>818      <span style="text-decoration: underline;">1</span>877 <span style="color: #BB0000;">NA</span>        Hubbac…</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">austen_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">68</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Anne Brontë is 404</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Brontë'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">##   gutenberg_author_id author         alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                 404 Brontë, Anne   <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>820      <span style="text-decoration: underline;">1</span>849 https://… Bronte…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                 405 Brontë, Emily  <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>818      <span style="text-decoration: underline;">1</span>848 https://… Bronte…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>                 408 Brontë, Charl… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>816      <span style="text-decoration: underline;">1</span>855 https://… Bell, …</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>                <span style="text-decoration: underline;">7</span>125 Brontë, Patri… Bron…      <span style="text-decoration: underline;">1</span>777      <span style="text-decoration: underline;">1</span>861 <span style="color: #BB0000;">NA</span>        Bronte…</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a_bronte_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">404</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Charlotte Brontë is 408</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Brontë'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">##   gutenberg_author_id author         alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                 404 Brontë, Anne   <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>820      <span style="text-decoration: underline;">1</span>849 https://… Bronte…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                 405 Brontë, Emily  <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>818      <span style="text-decoration: underline;">1</span>848 https://… Bronte…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>                 408 Brontë, Charl… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>816      <span style="text-decoration: underline;">1</span>855 https://… Bell, …</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>                <span style="text-decoration: underline;">7</span>125 Brontë, Patri… Bron…      <span style="text-decoration: underline;">1</span>777      <span style="text-decoration: underline;">1</span>861 <span style="color: #BB0000;">NA</span>        Bronte…</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c_bronte_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">408</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Emily Brontë is 405</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Brontë'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">##   gutenberg_author_id author         alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                 404 Brontë, Anne   <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>820      <span style="text-decoration: underline;">1</span>849 https://… Bronte…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                 405 Brontë, Emily  <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>818      <span style="text-decoration: underline;">1</span>848 https://… Bronte…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>                 408 Brontë, Charl… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>816      <span style="text-decoration: underline;">1</span>855 https://… Bell, …</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>                <span style="text-decoration: underline;">7</span>125 Brontë, Patri… Bron…      <span style="text-decoration: underline;">1</span>777      <span style="text-decoration: underline;">1</span>861 <span style="color: #BB0000;">NA</span>        Bronte…</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e_bronte_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">405</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Louisa May Alcott is 102</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Alcott'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">##   gutenberg_author_id author         alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                 102 Alcott, Louis… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>832      <span style="text-decoration: underline;">1</span>888 https://… Barnar…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                <span style="text-decoration: underline;">2</span>959 Alcott, Willi… Alco…      <span style="text-decoration: underline;">1</span>798      <span style="text-decoration: underline;">1</span>859 https://… Alcott…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>               <span style="text-decoration: underline;">38</span>495 Alcott, Amos … <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>799      <span style="text-decoration: underline;">1</span>888 https://… Alcott…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>               <span style="text-decoration: underline;">42</span>641 Pratt, Anna B… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>831      <span style="text-decoration: underline;">1</span>893 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span></span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alcott_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">102</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## George Eliot is 90</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Eliot'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 12 × 7</span></span></span>
<span><span class="co">##    gutenberg_author_id author        alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>                  90 Eliot, George <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>819      <span style="text-decoration: underline;">1</span>880 https://… Evans,…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>                 178 Gregory, Eli… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>854      <span style="text-decoration: underline;">1</span>915 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>                 599 Eliot, T. S.… Elio…      <span style="text-decoration: underline;">1</span>888      <span style="text-decoration: underline;">1</span>965 https://… Eliot,…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>                <span style="text-decoration: underline;">3</span>546 Eliot, Ethel… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>890      <span style="text-decoration: underline;">1</span>972 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>                <span style="text-decoration: underline;">4</span>887 Eliot, Charl… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>862      <span style="text-decoration: underline;">1</span>931 https://… Eliot,…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>                <span style="text-decoration: underline;">6</span>399 Eliot, Charl… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>834      <span style="text-decoration: underline;">1</span>926 http://e… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>                <span style="text-decoration: underline;">8</span>353 Stokes, Roy … <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>               <span style="text-decoration: underline;">25</span>235 Robinson, El… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>884        <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>               <span style="text-decoration: underline;">33</span>255 Trumbull, An… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>857      <span style="text-decoration: underline;">1</span>949 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>               <span style="text-decoration: underline;">35</span>592 Howard, Henr… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>873      <span style="text-decoration: underline;">1</span>940 <span style="color: #BB0000;">NA</span>        Howard…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">11</span>               <span style="text-decoration: underline;">39</span>082 Swan, Mirand… <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">12</span>               <span style="text-decoration: underline;">46</span>750 McCormick, E… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>849      <span style="text-decoration: underline;">1</span>891 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span></span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eliot_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">90</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Mary Wollstonecraft Shelley is 61</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Shelley'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 7</span></span></span>
<span><span class="co">##   gutenberg_author_id author         alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                  61 Shelley, Mary… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>797      <span style="text-decoration: underline;">1</span>851 https://… Shelle…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                <span style="text-decoration: underline;">1</span>529 Shelley, Perc… Shel…      <span style="text-decoration: underline;">1</span>792      <span style="text-decoration: underline;">1</span>822 https://… Shelle…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>                <span style="text-decoration: underline;">2</span>162 Shelley, Henr… <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>        Shelle…</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">shelley_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">61</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Charles Dickens is 37</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Dickens'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">##   gutenberg_author_id author         alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                  37 Dickens, Char… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>812      <span style="text-decoration: underline;">1</span>870 https://… Boz/Di…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                <span style="text-decoration: underline;">6</span>323 Clark, Sereno… <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>               <span style="text-decoration: underline;">31</span>615 Dickens, Mamie Dick…      <span style="text-decoration: underline;">1</span>838      <span style="text-decoration: underline;">1</span>896 <span style="color: #BB0000;">NA</span>        Dicken…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>               <span style="text-decoration: underline;">47</span>706 Dickens, Mary… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>862      <span style="text-decoration: underline;">1</span>948 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span></span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dickens_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">37</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## HG Wells is 30</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Wells'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 30 × 7</span></span></span>
<span><span class="co">##    gutenberg_author_id author        alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>                  30 Wells, H. G.… Well…      <span style="text-decoration: underline;">1</span>866      <span style="text-decoration: underline;">1</span>946 https://… Wells,…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>                 135 Brown, Willi… <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>      <span style="text-decoration: underline;">1</span>884 https://… Brown,…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>                <span style="text-decoration: underline;">1</span>060 Wells, Carol… Houg…      <span style="text-decoration: underline;">1</span>862      <span style="text-decoration: underline;">1</span>942 https://… Hought…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>                <span style="text-decoration: underline;">3</span>499 Wells, Phili… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>868      <span style="text-decoration: underline;">1</span>929 <span style="color: #BB0000;">NA</span>        Wells,…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>                <span style="text-decoration: underline;">4</span>952 Wells, J. (J… Well…      <span style="text-decoration: underline;">1</span>855      <span style="text-decoration: underline;">1</span>929 https://… Wells,…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>                <span style="text-decoration: underline;">5</span>122 Dall, Caroli… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>822      <span style="text-decoration: underline;">1</span>912 https://… Healey…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>                <span style="text-decoration: underline;">5</span>765 Wells-Barnet… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>862      <span style="text-decoration: underline;">1</span>931 https://… Wells,…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>                <span style="text-decoration: underline;">6</span>158 Hastings, We… Hast…      <span style="text-decoration: underline;">1</span>879      <span style="text-decoration: underline;">1</span>923 <span style="color: #BB0000;">NA</span>        Hastin…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>                <span style="text-decoration: underline;">7</span>102 Wells, Frede… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>874      <span style="text-decoration: underline;">1</span>929 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>               <span style="text-decoration: underline;">32</span>091 Reeder, Char… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>884        <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 20 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wells_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">30</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## HP Lovecraft is 34724</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gutenberg_authors</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">author</span>, <span class="st">'Lovecraft'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">##   gutenberg_author_id author         alias birthdate deathdate wikipedia aliases</span></span>
<span><span class="co">##                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>               <span style="text-decoration: underline;">34</span>724 Lovecraft, H.… <span style="color: #BB0000;">NA</span>         <span style="text-decoration: underline;">1</span>890      <span style="text-decoration: underline;">1</span>937 https://… Lovecr…</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lovecraft_df</span> <span class="op">=</span> <span class="fu">get_author</span><span class="op">(</span><span class="fl">34724</span><span class="op">)</span></span></code></pre></div>
<p>We combine these results, and use
<code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html" class="external-link">tidytext::unnest_tokens()</a></code> to convert the result into a
long-format document-term matrix. We also construct a dataframe to link
titles to authors in the topic model output.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataf</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">austen_df</span>, </span>
<span>          <span class="va">a_bronte_df</span>, </span>
<span>          <span class="va">c_bronte_df</span>, </span>
<span>          <span class="va">e_bronte_df</span>, </span>
<span>          <span class="va">alcott_df</span>, </span>
<span>          <span class="va">eliot_df</span>,</span>
<span>          <span class="va">shelley_df</span>,</span>
<span>          <span class="va">dickens_df</span>, </span>
<span>          <span class="va">wells_df</span>, </span>
<span>          <span class="va">lovecraft_df</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html" class="external-link">unnest_tokens</a></span><span class="op">(</span><span class="va">term</span>, <span class="va">text</span>, token <span class="op">=</span> <span class="st">'words'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">gutenberg_id</span>, <span class="va">author</span>, <span class="va">title</span>, <span class="va">term</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataf</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1,812,904 × 5</span></span></span>
<span><span class="co">##    gutenberg_id author                        title            term            n</span></span>
<span><span class="co">##           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>           35 Wells, H. G. (Herbert George) The Time Machine _can_           1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>           35 Wells, H. G. (Herbert George) The Time Machine _cancan_        1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>           35 Wells, H. G. (Herbert George) The Time Machine _down_          1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>           35 Wells, H. G. (Herbert George) The Time Machine _four_          1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>           35 Wells, H. G. (Herbert George) The Time Machine _him_           1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>           35 Wells, H. G. (Herbert George) The Time Machine _how_           1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>           35 Wells, H. G. (Herbert George) The Time Machine _i_             1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>           35 Wells, H. G. (Herbert George) The Time Machine _instantan…     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>           35 Wells, H. G. (Herbert George) The Time Machine _minus_         1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>           35 Wells, H. G. (Herbert George) The Time Machine _nil_           1</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1,812,894 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_df</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">dataf</span>, <span class="va">author</span>, <span class="va">title</span><span class="op">)</span></span></code></pre></div>
<p>The number of works by each author varies widely, as does the total
token count.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">dataf</span>, <span class="va">author</span>, <span class="va">title</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">author</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 2</span></span></span>
<span><span class="co">##    author                                 n</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Alcott, Louisa May                    45</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Austen, Jane                          10</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Brontë, Anne                           2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Brontë, Charlotte                      6</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Brontë, Emily                          1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Dickens, Charles                      77</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Eliot, George                         18</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Lovecraft, H. P. (Howard Phillips)     7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Shelley, Mary Wollstonecraft          17</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Wells, H. G. (Herbert George)         70</span></span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">dataf</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">title</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 253</span></span></code></pre>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataf</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">title</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, </span>
<span>              median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, </span>
<span>              max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, </span>
<span>              total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## `summarise()` has grouped output by 'author'. You can override using the</span></span>
<span><span class="co">## `.groups` argument.</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 5</span></span></span>
<span><span class="co">##    author                                min  median    max   total</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Dickens, Charles                     <span style="text-decoration: underline;">1</span>364  <span style="text-decoration: underline;">31</span>226  <span style="text-decoration: underline;">360</span>502 6<span style="text-decoration: underline;">785</span>632</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Wells, H. G. (Herbert George)        <span style="text-decoration: underline;">3</span>958  <span style="text-decoration: underline;">64</span>936. <span style="text-decoration: underline;">470</span>557 5<span style="text-decoration: underline;">224</span>147</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Alcott, Louisa May                   <span style="text-decoration: underline;">2</span>660  <span style="text-decoration: underline;">55</span>483  <span style="text-decoration: underline;">194</span>549 2<span style="text-decoration: underline;">977</span>676</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Eliot, George                        <span style="text-decoration: underline;">1</span>871 <span style="text-decoration: underline;">108</span>236. <span style="text-decoration: underline;">320</span>413 2<span style="text-decoration: underline;">247</span>001</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Austen, Jane                        <span style="text-decoration: underline;">23</span>192 <span style="text-decoration: underline;">101</span>879  <span style="text-decoration: underline;">784</span>790 1<span style="text-decoration: underline;">652</span>092</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Shelley, Mary Wollstonecraft        <span style="text-decoration: underline;">12</span>514  <span style="text-decoration: underline;">53</span>643  <span style="text-decoration: underline;">183</span>856 1<span style="text-decoration: underline;">434</span>844</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Brontë, Charlotte                    <span style="text-decoration: underline;">1</span>416 <span style="text-decoration: underline;">138</span>921  <span style="text-decoration: underline;">219</span>783  <span style="text-decoration: underline;">699</span>938</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Brontë, Anne                        <span style="text-decoration: underline;">68</span>716 <span style="text-decoration: underline;">119</span>946. <span style="text-decoration: underline;">171</span>177  <span style="text-decoration: underline;">239</span>893</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Lovecraft, H. P. (Howard Phillips)   <span style="text-decoration: underline;">3</span>654  <span style="text-decoration: underline;">12</span>073   <span style="text-decoration: underline;">99</span>008  <span style="text-decoration: underline;">160</span>200</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Brontë, Emily                      <span style="text-decoration: underline;">117</span>082 <span style="text-decoration: underline;">117</span>082  <span style="text-decoration: underline;">117</span>082  <span style="text-decoration: underline;">117</span>082</span></span></code></pre>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataf</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">title</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">n</span>, color <span class="op">=</span> <span class="va">author</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/ggbeeswarm/man/geom_beeswarm.html" class="external-link">geom_beeswarm</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_color_discrete</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## `summarise()` has grouped output by 'author'. You can override using the</span></span>
<span><span class="co">## `.groups` argument.</span></span></code></pre>
<p><img src="realbooks_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="vocabulary-selection">Vocabulary selection<a class="anchor" aria-label="anchor" href="#vocabulary-selection"></a>
</h2>
<p>In line with a common rule of thumb in topic modeling, we aim for a
vocabulary of about 10 times as many terms as documents in the
corpus.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vocab_size</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">dataf</span><span class="op">$</span><span class="va">author</span>, <span class="va">dataf</span><span class="op">$</span><span class="va">title</span><span class="op">)</span> <span class="op">*</span> <span class="fl">10</span></span>
<span><span class="va">vocab_size</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 2530</span></span></code></pre>
<p><code>tmfast</code> provides two information-theoretic methods for
vocabulary selection. Both are based on the idea of a two-player
guessing game. I pick one of the documents from the corpus, then one of
the terms from the document. I tell you the term, and you have to guess
which document I picked. More informative terms have greater information
gain (calculated as the Kullback-Leibler divergence) relative to a
“baseline” distribution based purely on the process used to pick the
document. The difference between the two methods is in the
document-picking process. The <code>ndH</code> method assumes the
document was picked uniformly at random from the corpus, so that no
document is more likely to be picked than any other. The
<code>ndR</code> method assumes document probability is proportional to
the document length, so that shorter documents are less likely to be
picked. This method implies that terms that are distinctive of shorter
documents have high information gain, since they indicate “surprising”
short documents.</p>
<p>On either method, the most informative terms are often typographical
or OCR errors, since these only occur in a single document. To balance
this, we multiply the information gain (<span class="math inline">\(\Delta H\)</span> for the uniform process, <span class="math inline">\(\Delta R\)</span> for the length-weighted process)
by the log frequency of the term across the entire corpus (<span class="math inline">\(\log n\)</span>). So <code>ndH</code> is shorthand
for <span class="math inline">\(\log(n) \Delta H\)</span> while
<code>ndR</code> is shorthand for <span class="math inline">\(\log(n)
\Delta R\)</span>.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html" class="external-link">tic</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">H_df</span> <span class="op">=</span> <span class="fu"><a href="../reference/ndH.html">ndH</a></span><span class="op">(</span><span class="va">dataf</span>, <span class="va">title</span>, <span class="va">term</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">R_df</span> <span class="op">=</span> <span class="fu"><a href="../reference/ndR.html">ndR</a></span><span class="op">(</span><span class="va">dataf</span>, <span class="va">title</span>, <span class="va">term</span>, <span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>in_vocab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">ndR</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="va">vocab_size</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html" class="external-link">toc</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 16.786 sec elapsed</span></span></code></pre>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">H_df</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 116,449 × 5</span></span></span>
<span><span class="co">##    term           H    dH     n   ndH</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> kipps     0.125   7.86  <span style="text-decoration: underline;">1</span>454  82.6</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> dombey    0.386   7.60  <span style="text-decoration: underline;">1</span>618  81.0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> boffin    0.108   7.87  <span style="text-decoration: underline;">1</span>127  79.8</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> pecksniff 0.366   7.62  <span style="text-decoration: underline;">1</span>320  79.0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> gwendolen 0.239   7.74  <span style="text-decoration: underline;">1</span>048  77.7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> lydgate   0.023<span style="text-decoration: underline;">5</span>  7.96   867  77.7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> deronda   0.404   7.58  <span style="text-decoration: underline;">1</span>155  77.1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> nicholas  0.977   7.01  <span style="text-decoration: underline;">1</span>931  76.5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> tito      0.083<span style="text-decoration: underline;">5</span>  7.90   811  76.3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> squeers   0.253   7.73   895  75.8</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 116,439 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">R_df</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 116,449 × 5</span></span></span>
<span><span class="co">##    term           n    dR   ndR in_vocab</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> kipps       <span style="text-decoration: underline;">1</span>454  7.48  78.6 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> hoopdriver   469  8.50  75.4 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> scrooge     <span style="text-decoration: underline;">1</span>007  7.54  75.3 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> lewisham     575  8.03  73.6 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> benham       689  7.56  71.3 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> melville     243  8.97  71.1 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> bealby       458  8.04  71.0 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> veronica     659  7.52  70.4 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> bert         556  7.71  70.3 TRUE    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> christie    <span style="text-decoration: underline;">1</span>797  6.43  69.5 TRUE    </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 116,439 more rows</span></span></span></code></pre>
<p>The resulting term ranking of the two methods tend to be similar, but
<code>ndR</code> is preferable in the current case because of the
additional weight it gives to distinctive terms from shorter
documents.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">H_df</span>, <span class="va">R_df</span>, by <span class="op">=</span> <span class="st">'term'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">ndH</span>, <span class="va">ndR</span>, color <span class="op">=</span> <span class="va">in_vocab</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">ndH</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="va">vocab_size</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: Using alpha for a discrete variable is not advised.</span></span></code></pre>
<p><img src="realbooks_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">H_df</span>, <span class="va">R_df</span>, by <span class="op">=</span> <span class="st">'term'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ndH_rank <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">ndH</span><span class="op">)</span><span class="op">)</span>, </span>
<span>           ndR_rank <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">ndR</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">ndH_rank</span>, <span class="va">ndR_rank</span>, color <span class="op">=</span> <span class="va">in_vocab</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="va">ndH_rank</span> <span class="op">&lt;=</span> <span class="va">vocab_size</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: Using alpha for a discrete variable is not advised.</span></span></code></pre>
<p><img src="realbooks_files/figure-html/unnamed-chunk-17-2.png" width="700"></p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vocab</span> <span class="op">=</span> <span class="va">R_df</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">in_vocab</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">vocab</span>, <span class="fl">50</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "kipps"      "hoopdriver" "scrooge"    "lewisham"   "benham"    </span></span>
<span><span class="co">##  [6] "melville"   "bealby"     "veronica"   "bert"       "christie"  </span></span>
<span><span class="co">## [11] "sylvia"     "snitchey"   "boldheart"  "britling"   "castruccio"</span></span>
<span><span class="co">## [16] "bounderby"  "lillian"    "maggie"     "marjorie"   "craggs"    </span></span>
<span><span class="co">## [21] "n't"        "kemp"       "bab"        "redwood"    "harman"    </span></span>
<span><span class="co">## [26] "cavor"      "chatteris"  "brumley"    "ammi"       "heathcliff"</span></span>
<span><span class="co">## [31] "tackleton"  "gladys"     "helwyze"    "tetterby"   "montgomery"</span></span>
<span><span class="co">## [36] "lodore"     "trafford"   "treherne"   "jill"       "ludovico"  </span></span>
<span><span class="co">## [41] "tito"       "lomi"       "canaris"    "trotty"     "villiers"  </span></span>
<span><span class="co">## [46] "falkner"    "doubledick" "amanda"     "gradgrind"  "linton"</span></span></code></pre>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataf</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">term</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">vocab</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">title</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">author</span>, <span class="va">n</span>, color <span class="op">=</span> <span class="va">author</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/ggbeeswarm/man/geom_beeswarm.html" class="external-link">geom_beeswarm</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_color_discrete</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## `summarise()` has grouped output by 'author'. You can override using the</span></span>
<span><span class="co">## `.groups` argument.</span></span></code></pre>
<p><img src="realbooks_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="fit-topic-models">Fit topic models<a class="anchor" aria-label="anchor" href="#fit-topic-models"></a>
</h2>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dtm</span> <span class="op">=</span> <span class="va">dataf</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">term</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">vocab</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log1p</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">n_authors</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">dataf</span><span class="op">$</span><span class="va">author</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html" class="external-link">tic</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">fitted_tmf</span> <span class="op">=</span> <span class="fu"><a href="../reference/tmfast.html">tmfast</a></span><span class="op">(</span><span class="va">dtm</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,</span>
<span>                              <span class="va">n_authors</span>, </span>
<span>                              <span class="va">n_authors</span> <span class="op">+</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>                    row <span class="op">=</span> <span class="va">title</span>, column <span class="op">=</span> <span class="va">term</span>, value <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html" class="external-link">toc</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 0.936 sec elapsed</span></span></code></pre>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/screeplot.html" class="external-link">screeplot</a></span><span class="op">(</span><span class="va">fitted_tmf</span>, npcs <span class="op">=</span> <span class="va">n_authors</span> <span class="op">+</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p><img src="realbooks_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="topic-exploration">Topic exploration<a class="anchor" aria-label="anchor" href="#topic-exploration"></a>
</h2>
<p>Without renormalization, most of the works are spread across a few
topics, and the topics don’t clearly correspond to authors.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">fitted_tmf</span>, <span class="va">n_authors</span>, <span class="st">'gamma'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">meta_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'document'</span> <span class="op">=</span> <span class="st">'title'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">document</span>, <span class="va">gamma</span>, fill <span class="op">=</span> <span class="va">topic</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">author</span><span class="op">)</span>, scales <span class="op">=</span> <span class="st">'free_x'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="realbooks_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<p>To renormalize, we need to choose a theoretical Dirichlet
distribution.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alpha</span> <span class="op">=</span> <span class="fu"><a href="../reference/peak_alpha.html">peak_alpha</a></span><span class="op">(</span><span class="va">n_authors</span>, <span class="fl">1</span>, peak <span class="op">=</span> <span class="fl">.8</span>, scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">target_entropy</span> <span class="op">=</span> <span class="fu"><a href="../reference/expected_entropy.html">expected_entropy</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">)</span></span>
<span><span class="va">target_entropy</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.997604</span></span></code></pre>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exponent</span> <span class="op">=</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">fitted_tmf</span>, <span class="va">n_authors</span>, <span class="st">'gamma'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/target_power.html">target_power</a></span><span class="op">(</span><span class="va">document</span>, <span class="va">gamma</span>, <span class="va">target_entropy</span><span class="op">)</span></span>
<span><span class="va">exponent</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 4.064884</span></span></code></pre>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">fitted_tmf</span>, <span class="va">n_authors</span>, <span class="st">'gamma'</span>, exponent <span class="op">=</span> <span class="va">exponent</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">meta_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'document'</span> <span class="op">=</span> <span class="st">'title'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">document</span>, <span class="va">gamma</span>, fill <span class="op">=</span> <span class="va">topic</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">author</span><span class="op">)</span>, scales <span class="op">=</span> <span class="st">'free_x'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="realbooks_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">fitted_tmf</span>, <span class="va">n_authors</span>, <span class="st">'gamma'</span>, exponent <span class="op">=</span> <span class="va">exponent</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">meta_df</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'document'</span> <span class="op">=</span> <span class="st">'title'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">document</span>, <span class="va">topic</span>, fill <span class="op">=</span> <span class="va">gamma</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_raster</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">author</span><span class="op">)</span>, </span>
<span>               scales <span class="op">=</span> <span class="st">'free_x'</span>, </span>
<span>               switch <span class="op">=</span> <span class="st">'x'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span></span></code></pre></div>
<p><img src="realbooks_files/figure-html/unnamed-chunk-22-2.png" width="700"></p>
<p>After renormalization, there are distinctive topics for Alcott (4)
and Wells (1 and 9). Austen, Anne Brontë, Emily Brontë, and some of
Shelley’s works appear together in topic 3. Charlotte Brontë and some of
Eliot’s and Shelley’s works split topic 5. Eliot and Lovecraft share
topic 10. And Dickens’ works are spread across multiple topics, with 2,
6, and 8 appearing to be distinctive to him.</p>
<p>To aid interpretation, we create a crosswalk dataframe connecting
topics to authors.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">topic_author</span> <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>   <span class="op">~</span> <span class="va">topic</span>, <span class="op">~</span> <span class="va">authors</span>,</span>
<span>   <span class="st">'V01'</span>, <span class="st">'Wells'</span>, </span>
<span>   <span class="st">'V02'</span>, <span class="st">'Dickens'</span>, </span>
<span>   <span class="st">'V03'</span>, <span class="st">'Austin, A &amp; E Brontë'</span>, </span>
<span>   <span class="st">'V04'</span>, <span class="st">'Alcott'</span>, </span>
<span>   <span class="st">'V05'</span>, <span class="st">'Dickens'</span>, </span>
<span>   <span class="st">'V06'</span>, <span class="st">'Dickens'</span>, </span>
<span>   <span class="st">'V07'</span>, <span class="st">'C Brontë, Eliot, Shelley'</span>, </span>
<span>   <span class="st">'V08'</span>, <span class="st">'Dickens'</span>, </span>
<span>   <span class="st">'V09'</span>, <span class="st">'Wells'</span>, </span>
<span>   <span class="st">'V10'</span>, <span class="st">'Eliot, Lovecraft'</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To explore these topics further, we turn to the word-topic
distribution. These distributions could be renormalized, as with the
topic-doc distributions. But the exponent for the word-topic
distributions is usually quite close to 1, meaning renormalization
doesn’t change these distributions very much.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">target_entropy_term</span> <span class="op">=</span> <span class="fu"><a href="../reference/expected_entropy.html">expected_entropy</a></span><span class="op">(</span><span class="fl">.1</span>, k <span class="op">=</span> <span class="va">vocab_size</span><span class="op">)</span></span>
<span><span class="va">target_entropy_term</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 8.597192</span></span></code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exponent_term</span> <span class="op">=</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">fitted_tmf</span>, <span class="va">n_authors</span>, <span class="st">'beta'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/target_power.html">target_power</a></span><span class="op">(</span><span class="va">topic</span>, <span class="va">beta</span>, <span class="va">target_entropy_term</span><span class="op">)</span></span>
<span><span class="va">exponent_term</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 1.066448</span></span></code></pre>
<p>We therefore skip renormalization and move directly to a Silge plot,
showing the top 10 terms for each topic.
<code><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html" class="external-link">tidytext::reorder_within()</a></code> and
<code><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html" class="external-link">tidytext::scale_x_reordered()</a></code> are useful for constructing
this plot.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">beta_df</span> <span class="op">=</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">fitted_tmf</span>, <span class="va">n_authors</span>, <span class="st">'beta'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">top_terms</span> <span class="op">=</span> <span class="va">beta_df</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">topic</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">topic</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">beta</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html" class="external-link">top_n</a></span><span class="op">(</span><span class="fl">15</span>, <span class="va">beta</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">topic_author</span>, by <span class="op">=</span> <span class="st">'topic'</span><span class="op">)</span></span>
<span><span class="va">top_terms</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 150 × 4</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Groups:   topic [10]</span></span></span>
<span><span class="co">##    token     topic    beta authors</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> empire    V01   0.016<span style="text-decoration: underline;">2</span>  Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> britain   V01   0.012<span style="text-decoration: underline;">4</span>  Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> peoples   V01   0.012<span style="text-decoration: underline;">2</span>  Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> russia    V01   0.011<span style="text-decoration: underline;">7</span>  Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> king      V01   0.011<span style="text-decoration: underline;">1</span>  Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> asia      V01   0.010<span style="text-decoration: underline;">4</span>  Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> socialism V01   0.009<span style="text-decoration: underline;">95</span> Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> section   V01   0.009<span style="text-decoration: underline;">71</span> Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> egypt     V01   0.009<span style="text-decoration: underline;">26</span> Wells  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> ii        V01   0.008<span style="text-decoration: underline;">92</span> Wells  </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 140 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">top_terms</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>token <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html" class="external-link">reorder_within</a></span><span class="op">(</span><span class="va">token</span>, </span>
<span>                                  by <span class="op">=</span> <span class="va">beta</span>, </span>
<span>                                  within <span class="op">=</span> <span class="va">topic</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">token</span>, <span class="va">beta</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xend <span class="op">=</span> <span class="va">token</span><span class="op">)</span>, yend <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">topic</span>, <span class="va">authors</span><span class="op">)</span>, scales <span class="op">=</span> <span class="st">'free_y'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/reorder_within.html" class="external-link">scale_x_reordered</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="realbooks_files/figure-html/unnamed-chunk-25-1.png" width="700"></p>
<p>Most topics (2, 3, 4, 5, 6, 8, 9) focus on character names, with
three of the four Dickens topics corresponding to <em>The Pickwick
Papers</em> (topic 2), <em>Oliver Twist</em> (5), and <em>David
Copperfield</em> (8). Wells’ topics appear to distinguish non-fiction
essays (topic 1) from fiction (9). Topic 7 groups together Charlotte
Brontë, Eliot, and Shelley based on the use of French. Topic 10 has a
mix of character names with months of the year; it appears to be a
“miscellaneous” topic, often created by topic models to accommodate
documents that don’t fit elsewhere.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Dan Hicks.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
